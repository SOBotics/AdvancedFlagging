// ==UserScript==
// @name         Advanced Flagging
// @namespace    https://github.com/SOBotics
// @version      1.3.4
// @author       Robert Rudman
// @match        *://*.stackexchange.com/*
// @match        *://*.stackoverflow.com/*
// @match        *://*.superuser.com/*
// @match        *://*.serverfault.com/*
// @match        *://*.askubuntu.com/*
// @match        *://*.stackapps.com/*
// @match        *://*.mathoverflow.net/*
// @exclude      *://chat.stackexchange.com/*
// @exclude      *://chat.meta.stackexchange.com/*
// @exclude      *://chat.stackoverflow.com/*
// @exclude      *://blog.stackoverflow.com/*
// @exclude      *://*.area51.stackexchange.com/*
// @exclude      *://data.stackexchange.com/*
// @require      https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js
// @grant        GM_xmlhttpRequest
// @grant        GM_listValues
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_deleteValue
// ==/UserScript==

!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=73)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(0),i=n(27),o=n(48),s=n(5),a=n(35),u=n(17),c=n(33),l=function(t){function e(n,r,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,s._parentSubscription=null,arguments.length){case 0:s.destination=o.a;break;case 1:if(!n){s.destination=o.a;break}if("object"==typeof n){n instanceof e?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new h(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new h(s,n,r,i)}return s}return r.a(e,t),e.prototype[a.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(s.a),h=function(t){function e(e,n,r,s){var a,u=t.call(this)||this;u._parentSubscriber=e;var c=u;return Object(i.a)(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o.a&&(c=Object.create(n),Object(i.a)(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=a,u._error=r,u._complete=s,u}return r.a(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw t;Object(c.a)(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return u.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(c.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(l)},function(t,e,n){"use strict";var r=n(45),i=n(1),o=n(35),s=n(48);var a=n(22),u=n(34),c=n(17);n.d(e,"a",(function(){return l}));var l=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,a=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(s.a)}(t,e,n);if(r?r.call(a,this.source):a.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(r.a)(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=h(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[a.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(u.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=h(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function h(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(16),i=n(66);function o(t,e,n,o,s){if(void 0===s&&(s=new r.a(t,n,o)),!s.closed)return Object(i.a)(e)(s)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(1).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(10),i=n(63),o=n(27),s=n(13),a=n(6),u=n(36),c=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,c=this._parents,h=this._unsubscribe,f=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,d=c?c.length:0;n;)n.remove(this),n=++p<d&&c[p]||null;if(Object(o.a)(h))Object(s.a)(h).call(this)===a.a&&(e=!0,t=t||(a.a.e instanceof u.a?l(a.a.e.errors):[a.a.e]));if(Object(r.a)(f))for(p=-1,d=f.length;++p<d;){var b=f[p];if(Object(i.a)(b))if(Object(s.a)(b.unsubscribe).call(b)===a.a){e=!0,t=t||[];var y=a.a.e;y instanceof u.a?t=t.concat(l(y.errors)):t.push(y)}}if(e)throw new u.a(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function l(t){return t.reduce((function(t,e){return t.concat(e instanceof u.a?e.errors:e)}),[])}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={e:{}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return h}));var r=n(0),i=n(2),o=n(1),s=n(5),a=n(23),u=n(64),c=n(35),l=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.a(e,t),e}(o.a),h=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.a(e,t),e.prototype[c.a]=function(){return new l(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),s.a.EMPTY):this.isStopped?(t.complete(),s.a.EMPTY):(this.observers.push(t),new u.a(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(i.a),f=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.a(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.a.EMPTY},e}(h)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(2),i=new r.a((function(t){return t.complete()}));function o(t){return t?function(t){return new r.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):i}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(31),i=new(n(29).a)(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(1);function o(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,i=n(6);function o(){try{return r.apply(this,arguments)}catch(t){return i.a.e=t,i.a}}function s(t){return r=t,o}},function(t,e,n){"use strict";var r=n(2),i=n(69),o=n(68),s=n(22);var a=n(21);var u=n(15),c=n(5),l=n(70);var h=n(71);var f=n(67);var p=n(66);function d(t,e){if(!e)return t instanceof r.a?t:new r.a(Object(p.a)(t));if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return e?new r.a((function(n){var r=new c.a;return r.add(e.schedule((function(){var i=t[s.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r})):new r.a(Object(f.a)(t))}(t,e);if(Object(i.a)(t))return function(t,e){return e?new r.a((function(n){var r=new c.a;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r})):new r.a(Object(l.a)(t))}(t,e);if(Object(o.a)(t))return Object(u.a)(t,e);if(function(t){return t&&"function"==typeof t[a.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return e?new r.a((function(n){var r,i=new c.a;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[a.a](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),i})):new r.a(Object(h.a)(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}n.d(e,"a",(function(){return d}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),i=n(5),o=n(65);function s(t,e){return e?new r.a((function(n){var r=new i.a,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})):new r.a(Object(o.a)(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(1).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(8),i=n(39),o=n(40),s=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));var i=r()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(e,"a",(function(){return i})),r.prototype=Object.create(Error.prototype);var i=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(11),i=n(39),o=n(14),s=n(58);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&Object(r.a)(t[1])?Object(o.a)(t[0]):Object(s.a)()(i.a.apply(void 0,t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(0),i=n(3),o=n(4),s=n(16),a=n(12),u=n(14);function c(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(c((function(n,r){return Object(u.a)(t(n,r)).pipe(Object(a.a)((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new l(t,n))})}var l=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project,this.concurrent))},t}(),h=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new s.a(this,void 0,void 0);this.destination.add(r),Object(i.a)(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},function(t,e,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}n.d(e,"a",(function(){return i})),r.prototype=Object.create(Error.prototype);var i=r},function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}n.d(e,"a",(function(){return i})),r.prototype=Object.create(Error.prototype);var i=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(49),o=function(t){function e(n,r){void 0===r&&(r=i.a.now);var o=t.call(this,n,(function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.a(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(0),i=n(7),o=n(5),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.a(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.a)},function(t,e,n){"use strict";var r=n(0),i=function(t){function e(e,n){return t.call(this)||this}return r.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(5).a);n.d(e,"a",(function(){return o}));var o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(i)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(10);function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},function(t,e,n){"use strict";function r(t){setTimeout((function(){throw t}))}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(18);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:r.a}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},function(t,e,n){"use strict";function r(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}n.d(e,"a",(function(){return i})),r.prototype=Object.create(Error.prototype);var i=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(1);function o(){return function(t){return t.lift(new s(t))}}var s=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new a(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(0),i=n(7),o=n(62),s=n(5),a=n(56),u=n(23),c=n(64),l=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.a(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new h(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new u.a;if(this.isStopped||this.hasError?e=s.a.EMPTY:(this.observers.push(t),e=new c.a(this,t)),i&&t.add(t=new a.a(t,i)),n)for(var l=0;l<o&&!t.closed;l++)t.next(r[l]);else for(l=0;l<o&&!t.closed;l++)t.next(r[l].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.a).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.a),h=function(){return function(t,e){this.time=t,this.value=e}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(11),i=n(15),o=n(8),s=n(46);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(Object(r.a)(n)?t.pop():n=void 0,t.length){case 0:return Object(o.b)(n);case 1:return n?Object(i.a)(t,n):Object(s.a)(t[0]);default:return Object(i.a)(t,n)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(2);function i(t,e){return e?new r.a((function(n){return e.schedule(o,0,{error:t,subscriber:n})})):new r.a((function(e){return e.error(t)}))}function o(t){var e=t.error;t.subscriber.error(e)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return h}));var r=n(0),i=n(11),o=n(10),s=n(4),a=n(3),u=n(15),c={};function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Object(i.a)(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(o.a)(t[0])&&(t=t[0]),Object(u.a)(t,r).lift(new h(n))}var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},t}(),f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.a(e,t),e.prototype._next=function(t){this.values.push(c),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(a.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===c?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(25),i=n(19);function o(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.a)(i.a,t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),i=n(14),o=n(8);function s(t){return new r.a((function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)}))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return h}));var r=n(0),i=n(15),o=n(10),s=n(1),a=n(4),u=n(3),c=n(21);function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Object(i.a)(t,void 0).lift(new h(n))}var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},t}(),f=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return r.a(e,t),e.prototype._next=function(t){var e=this.iterators;Object(o.a)(t)?e.push(new d(t)):"function"==typeof t[c.a]?e.push(new p(t[c.a]())):e.push(new b(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(s=t[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var s,a=(s=t[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(s.a),p=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),d=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[c.a]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),b=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r.a(e,t),e.prototype[c.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Object(u.a)(this,this.observable,this,e)},e}(a.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1);function i(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof r.a?i:null}return!0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(2);function i(t){var e=new r.a((function(e){e.next(t),e.complete()}));return e._isScalar=!0,e.value=t,e}},function(t,e,n){"use strict";var r=n(0),i=1,o={};var s=function(t){var e=i++;return o[e]=t,Promise.resolve().then((function(){return function(t){var e=o[t];e&&e()}(e)})),e},a=function(t){delete o[t]},u=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=s(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(a(n),e.scheduled=void 0)},e}(n(31).a),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(n(29).a);n.d(e,"a",(function(){return l}));var l=new c(u)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(17),i=n(33),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}()},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return f}));var r=n(0),i=n(1),o=n(5),s=n(2),a=n(7);function u(t,e,n,r){return function(i){return i.lift(new c(t,e,n,r))}}var c=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),l=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.keySelector=n,s.elementSelector=r,s.durationSelector=i,s.subjectSelector=o,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new a.a,n.set(e,i);var o=new f(e,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new f(e,i))}catch(t){return void this.error(t)}this.add(s.subscribe(new h(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach((function(e,n){e.error(t)})),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach((function(t,e){t.complete()})),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(i.a),h=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return r.a(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(i.a),f=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return r.a(e,t),e.prototype._subscribe=function(t){var e=new o.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new p(n)),e.add(r.subscribe(t)),e},e}(s.a),p=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.a(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(o.a)},function(t,e,n){var r;void 0===(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{static async GetAndCache(t,e,r){const i=n.GetFromCache(t);if(void 0!==i)return i;const o=await e();return n.StoreInCache(t,o,r),o}static ClearExpiredKeys(t){GM_listValues().forEach(e=>{if(!t||t.filter(t=>e.match(t)).length>0){const t=GM_getValue(e,void 0);if(t)try{const r=JSON.parse(t);r.Expires&&new Date(r.Expires)<new Date&&n.Unset(e)}catch{}}})}static ClearAll(t,e){GM_listValues().forEach(r=>{if(t.filter(t=>r.match(t)).length>0)if(e){const t=GM_getValue(r,void 0);e(t)&&n.Unset(r)}else n.Unset(r)})}static GetFromCache(t){const e=GM_getValue(t,void 0);if(!e)return;const n=JSON.parse(e);return n.Expires&&new Date(n.Expires)<new Date?void 0:n.Data}static StoreInCache(t,e,n){const r=JSON.stringify({Expires:n,Data:e});GM_setValue(t,r)}static Unset(t){GM_deleteValue(t)}}e.GreaseMonkeyCache=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n(13),o=n(6),s=n(4),a=n(3);function u(t){return function(e){return e.lift(new c(t))}}var c=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.a(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=Object(i.a)(this.durationSelector)(t);if(e===o.a)this.destination.error(o.a.e);else{var n=Object(a.a)(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(s.a),h=n(9),f=n(61);function p(t,e){return void 0===e&&(e=h.a),u((function(){return Object(f.a)(t,e)}))}function d(t){return function(e){return e.lift(new b(t))}}var b=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new y(t,this.closingNotifier))},t}(),y=function(t){function e(e,n){var r=t.call(this,e)||this;return r.buffer=[],r.add(Object(a.a)(r,n)),r}return r.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(s.a),v=n(1);function m(t,e){return void 0===e&&(e=null),function(n){return n.lift(new w(t,e))}}var w=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?x:g}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),g=function(t){function e(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return r.a(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(v.a),x=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r.a(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var o=r.length;o--;){var s=r[o];s.push(t),s.length===e&&(r.splice(o,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},e}(v.a),_=n(11);function S(t){var e=arguments.length,n=h.a;Object(_.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new k(t,r,i,n))}}var k=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new C(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),O=function(){return function(){this.buffer=[]}}(),C=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=r,s.maxBufferSize=i,s.scheduler=o,s.contexts=[];var a=s.openContext();if(s.timespanOnly=null==r||r<0,s.timespanOnly){var u={subscriber:s,context:a,bufferTimeSpan:n};s.add(a.closeAction=o.schedule(j,n,u))}else{var c={subscriber:s,context:a},l={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:s,scheduler:o};s.add(a.closeAction=o.schedule(I,n,c)),s.add(o.schedule(T,r,l))}return s}return r.a(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],s=o.buffer;s.push(t),s.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(j,n,r))}},e.prototype.openContext=function(){var t=new O;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(v.a);function j(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function T(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(I,n,{subscriber:r,context:o})),this.schedule(t,e))}function I(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var N=n(5);function E(t,e){return function(n){return n.lift(new R(t,e))}}var R=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new A(t,this.openings,this.closingSelector))},t}(),A=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(Object(a.a)(i,n)),i}return r.a(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new N.a,r={buffer:[],subscription:n};e.push(r);var i=Object(a.a)(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},e}(s.a);function P(t){return function(e){return e.lift(new F(t))}}var F=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new V(t,this.closingSelector))},t}(),V=function(t){function e(e,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var n=Object(i.a)(this.closingSelector)();n===o.a?this.error(o.a.e):(t=new N.a,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Object(a.a)(this,n)),this.subscribing=!1)},e}(s.a),D=n(16);function M(t){return function(e){var n=new $(t),r=e.lift(n);return n.caught=r}}var $=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new G(t,this.selector,this.caught))},t}(),G=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new D.a(this,void 0,void 0);this.add(r),Object(a.a)(this,n,void 0,void 0,r)}},e}(s.a),q=n(41);function W(t){return function(e){return e.lift(new q.a(t))}}var L=n(10),U=n(14);function B(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(L.a)(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(Object(U.a)([e].concat(t)),new q.a(n))}}var z=n(24);function K(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(z.a.apply(void 0,[e].concat(t)))}}var Y=n(58),H=n(25);function Q(t,e){return Object(H.a)(t,e,1)}function J(t,e){return Q((function(){return t}),e)}function X(t){return function(e){return e.lift(new Z(t,e))}}var Z=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new tt(t,this.predicate,this.source))},t}(),tt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(v.a);function et(t){return function(e){return e.lift(new nt(t))}}var nt=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new rt(t,this.durationSelector))},t}(),rt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return r.a(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(a.a)(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(s.a);function it(t,e){return void 0===e&&(e=h.a),function(n){return n.lift(new ot(t,e))}}var ot=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new st(t,this.dueTime,this.scheduler))},t}(),st=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r.a(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(at,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(v.a);function at(t){t.debouncedNext()}function ut(t){return void 0===t&&(t=null),function(e){return e.lift(new ct(t))}}var ct=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new lt(t,this.defaultValue))},t}(),lt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.a(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(v.a);function ht(t){return t instanceof Date&&!isNaN(+t)}var ft=n(20);function pt(t,e){void 0===e&&(e=h.a);var n=ht(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new dt(n,e))}}var dt=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new bt(t,this.delay,this.scheduler))},t}(),bt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r.a(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new yt(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(ft.a.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(ft.a.createComplete()),this.unsubscribe()},e}(v.a),yt=function(){return function(t,e){this.time=t,this.notification=e}}(),vt=n(2);function mt(t,e){return e?function(n){return new xt(n,e).lift(new wt(t))}:function(e){return e.lift(new wt(t))}}var wt=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new gt(t,this.delayDurationSelector))},t}(),gt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var n=Object(a.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(s.a),xt=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=n,r}return r.a(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new _t(t,this.source))},e}(vt.a),_t=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return r.a(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(v.a);function St(){return function(t){return t.lift(new kt)}}var kt=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Ot(t))},t}(),Ot=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(v.a);function Ct(t,e){return function(n){return n.lift(new jt(t,e))}}var jt=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new Tt(t,this.keySelector,this.flushes))},t}(),Tt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=n,i.values=new Set,r&&i.add(Object(a.a)(i,r)),i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(s.a);function It(t,e){return function(n){return n.lift(new Nt(t,e))}}var Nt=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Et(t,this.compare,this.keySelector))},t}(),Et=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return r.a(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=Object(i.a)(this.keySelector)(t))===o.a)return this.destination.error(o.a.e);var n=!1;if(this.hasKey){if((n=Object(i.a)(this.compare)(this.key,e))===o.a)return this.destination.error(o.a.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))},e}(v.a);function Rt(t,e){return It((function(n,r){return e?e(n[t],r[t]):n[t]===r[t]}))}var At=n(26);function Pt(t,e){return function(n){return n.lift(new Ft(t,e))}}var Ft=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Vt(t,this.predicate,this.thisArg))},t}(),Vt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(v.a),Dt=n(18),Mt=n(27);function $t(t,e,n){return function(r){return r.lift(new Gt(t,e,n))}}var Gt=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new qt(t,this.nextOrObserver,this.error,this.complete))},t}(),qt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=Dt.a,o._tapError=Dt.a,o._tapComplete=Dt.a,o._tapError=r||Dt.a,o._tapComplete=i||Dt.a,Object(Mt.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Dt.a,o._tapError=n.error||Dt.a,o._tapComplete=n.complete||Dt.a),o}return r.a(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(v.a),Wt=n(28),Lt=function(t){return void 0===t&&(t=Ut),$t({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})};function Ut(){return new Wt.a}var Bt=n(8);function zt(t){return function(e){return 0===t?Object(Bt.b)():e.lift(new Kt(t))}}var Kt=function(){function t(t){if(this.total=t,this.total<0)throw new At.a}return t.prototype.call=function(t,e){return e.subscribe(new Yt(t,this.total))},t}(),Yt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(v.a);function Ht(t,e){if(t<0)throw new At.a;var n=arguments.length>=2;return function(r){return r.pipe(Pt((function(e,n){return n===t})),zt(1),n?ut(e):Lt((function(){return new At.a})))}}var Qt=n(15),Jt=n(46);function Xt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];Object(_.a)(n)?t.pop():n=null;var r=t.length;return 1!==r||n?r>0?Object(z.a)(e,Object(Qt.a)(t,n)):Object(z.a)(e,Object(Bt.b)(n)):Object(z.a)(e,Object(Jt.a)(t[0]))}}function Zt(t,e){return function(n){return n.lift(new te(t,e,n))}}var te=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new ee(t,this.predicate,this.thisArg,this.source))},t}(),ee=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r.a(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(v.a);function ne(){return function(t){return t.lift(new re)}}var re=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ie(t))},t}(),ie=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r.a(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(a.a)(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(s.a),oe=n(12);function se(t,e){return e?function(n){return n.pipe(se((function(n,r){return Object(U.a)(t(n,r)).pipe(Object(oe.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new ae(t))}}var ae=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new ue(t,this.project))},t}(),ue=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.hasSubscription=!0,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new D.a(this,void 0,void 0);this.destination.add(r),Object(a.a)(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(s.a);function ce(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new le(t,e,n))}}var le=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new he(t,this.project,this.concurrent,this.scheduler))},t}(),he=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return r.a(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(t);var s=Object(i.a)(this.project)(t,r);if(s===o.a)n.error(o.a.e);else if(this.scheduler){var a={subscriber:this,result:s,value:t,index:r};this.destination.add(this.scheduler.schedule(e.dispatch,0,a))}else this.subscribeToProjection(s,t,r)}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.destination.add(Object(a.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(s.a);function fe(t){return function(e){return e.lift(new pe(t))}}var pe=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new de(t,this.callback))},t}(),de=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new N.a(n)),r}return r.a(e,t),e}(v.a);function be(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new ye(t,n,!1,e))}}var ye=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new ve(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),ve=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.predicate=n,s.source=r,s.yieldIndex=i,s.thisArg=o,s.index=0,s}return r.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(v.a);function me(t,e){return function(n){return n.lift(new ye(t,n,!0,e))}}var we=n(19);function ge(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Pt((function(e,n){return t(e,n,r)})):we.a,zt(1),n?ut(e):Lt((function(){return new Wt.a})))}}var xe=n(50);function _e(){return function(t){return t.lift(new Se)}}var Se=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ke(t))},t}(),ke=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype._next=function(t){},e}(v.a);function Oe(){return function(t){return t.lift(new Ce)}}var Ce=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new je(t))},t}(),je=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(v.a);function Te(t){return function(e){return 0===t?Object(Bt.b)():e.lift(new Ie(t))}}var Ie=function(){function t(t){if(this.total=t,this.total<0)throw new At.a}return t.prototype.call=function(t,e){return e.subscribe(new Ne(t,this.total))},t}(),Ne=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(v.a);function Ee(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Pt((function(e,n){return t(e,n,r)})):we.a,Te(1),n?ut(e):Lt((function(){return new Wt.a})))}}function Re(t){return function(e){return e.lift(new Ae(t))}}var Ae=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new Pe(t,this.value))},t}(),Pe=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return r.a(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(v.a);function Fe(){return function(t){return t.lift(new Ve)}}var Ve=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new De(t))},t}(),De=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype._next=function(t){this.destination.next(ft.a.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(ft.a.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(ft.a.createComplete()),t.complete()},e}(v.a);function Me(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new $e(t,e,n))}}var $e=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new Ge(t,this.accumulator,this.seed,this.hasSeed))},t}(),Ge=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r.a(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(v.a),qe=n(34);function We(t,e){return arguments.length>=2?function(n){return Object(qe.a)(Me(t,e),Te(1),ut(e))(n)}:function(e){return Object(qe.a)(Me((function(e,n,r){return t(e,n,r+1)})),Te(1))(e)}}function Le(t){return We("function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e})}var Ue=n(59);function Be(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(Ue.a.apply(void 0,[e].concat(t)))}}var ze=n(42);function Ke(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?Object(H.a)((function(){return t}),e,n):("number"==typeof e&&(n=e),Object(H.a)((function(){return t}),n))}function Ye(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new He(t,e,n))}}var He=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new Qe(t,this.accumulator,this.seed,this.concurrent))},t}(),Qe=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r.a(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=Object(i.a)(this.accumulator)(this.acc,t),r=this.destination;n===o.a?r.error(o.a.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){var r=new D.a(this,void 0,void 0);this.destination.add(r),Object(a.a)(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(s.a);function Je(t){return We("function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e})}var Xe=n(54);function Ze(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new tn(r,e));var i=Object.create(n,Xe.b);return i.source=n,i.subjectFactory=r,i}}var tn=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}(),en=n(56);function nn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&Object(L.a)(t[0])&&(t=t[0]),function(e){return e.lift(new rn(t))}}var rn=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new on(t,this.nextSources))},t}(),on=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.nextSources=n,r}return r.a(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var e=new D.a(this,void 0,void 0);this.destination.add(e),Object(a.a)(this,t,void 0,void 0,e)}else this.destination.complete()},e}(s.a);function sn(){return function(t){return t.lift(new an)}}var an=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new un(t))},t}(),un=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return r.a(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(v.a);function cn(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}function ln(t,e){return function(n){return[Pt(t,e)(n),Pt(cn(t,e))(n)]}}function hn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return Object(oe.a)(fn(t,n))(e)}}function fn(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return;r=o}return r}}var pn=n(7);function dn(t){return t?Ze((function(){return new pn.a}),t):Ze(new pn.a)}var bn=n(55);function yn(t){return function(e){return Ze(new bn.a(t))(e)}}var vn=n(30);function mn(){return function(t){return Ze(new vn.a)(t)}}var wn=n(38);function gn(t,e,n,r){n&&"function"!=typeof n&&(r=n);var i="function"==typeof n?n:void 0,o=new wn.a(t,e,r);return function(t){return Ze((function(){return o}),i)(t)}}var xn=n(60);function _n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&Object(L.a)(t[0])&&(t=t[0]),e.lift.call(xn.a.apply(void 0,[e].concat(t)))}}function Sn(t){return void 0===t&&(t=-1),function(e){return 0===t?Object(Bt.b)():t<0?e.lift(new kn(-1,e)):e.lift(new kn(t-1,e))}}var kn=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new On(t,this.count,this.source))},t}(),On=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r.a(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(v.a);function Cn(t){return function(e){return e.lift(new jn(t))}}var jn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Tn(t,this.notifier,e))},t}(),Tn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){this.notifications=new pn.a;var e=Object(i.a)(this.notifier)(this.notifications);if(e===o.a)return t.prototype.complete.call(this);this.retries=e,this.retriesSubscription=Object(a.a)(this,e)},e}(s.a);function In(t){return void 0===t&&(t=-1),function(e){return e.lift(new Nn(t,e))}}var Nn=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new En(t,this.count,this.source))},t}(),En=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(v.a);function Rn(t){return function(e){return e.lift(new An(t,e))}}var An=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Pn(t,this.notifier,this.source))},t}(),Pn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,s=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(n=new pn.a,(r=Object(i.a)(this.notifier)(n))===o.a)return t.prototype.error.call(this,o.a.e);s=Object(a.a)(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=s,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},e}(s.a),Fn=n(37);function Vn(t){return function(e){return e.lift(new Dn(t))}}var Dn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new Mn(t),r=e.subscribe(n);return r.add(Object(a.a)(n,this.notifier)),r},t}(),Mn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return r.a(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(s.a);function $n(t,e){return void 0===e&&(e=h.a),function(n){return n.lift(new Gn(t,e))}}var Gn=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new qn(t,this.period,this.scheduler))},t}(),qn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(Wn,n,{subscriber:i,period:n})),i}return r.a(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(v.a);function Wn(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}function Ln(t,e){return function(n){return n.lift(new Un(t,e))}}var Un=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new Bn(t,this.compareTo,this.comparor))},t}(),Bn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.compareTo=n,i.comparor=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new zn(e,i))),i}return r.a(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparor;t.length>0&&e.length>0;){var r=t.shift(),s=e.shift(),a=!1;n?(a=Object(i.a)(n)(r,s))===o.a&&this.destination.error(o.a.e):a=r===s,a||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e}(v.a),zn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return r.a(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(v.a);function Kn(){return new pn.a}function Yn(){return function(t){return Object(Fn.a)()(Ze(Kn)(t))}}function Hn(t,e,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY),function(r){return r.lift(function(t,e,n){var r,i,o=0,s=!1,a=!1;return function(u){o++,r&&!s||(s=!1,r=new wn.a(t,e,n),i=u.subscribe({next:function(t){r.next(t)},error:function(t){s=!0,r.error(t)},complete:function(){a=!0,r.complete()}}));var c=r.subscribe(this);return function(){o--,c.unsubscribe(),i&&0===o&&a&&i.unsubscribe()}}}(t,e,n))}}function Qn(t){return function(e){return e.lift(new Jn(t,e))}}var Jn=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Xn(t,this.predicate,this.source))},t}(),Xn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r.a(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Wt.a)},e}(v.a);function Zn(t){return function(e){return e.lift(new tr(t))}}var tr=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new er(t,this.total))},t}(),er=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(v.a);function nr(t){return function(e){return e.lift(new rr(t))}}var rr=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new At.a}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new v.a(t)):e.subscribe(new ir(t,this._skipCount))},t}(),ir=function(t){function e(e,n){var r=t.call(this,e)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r.a(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}},e}(v.a);function or(t){return function(e){return e.lift(new sr(t))}}var sr=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new ar(t,this.notifier))},t}(),ar=function(t){function e(e,n){var r=t.call(this,e)||this;r.hasValue=!1;var i=new D.a(r,void 0,void 0);return r.add(i),r.innerSubscription=i,Object(a.a)(r,n,void 0,void 0,i),r}return r.a(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(s.a);function ur(t){return function(e){return e.lift(new cr(t))}}var cr=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new lr(t,this.predicate))},t}(),lr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(v.a);function hr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];Object(_.a)(n)?t.pop():n=null;var r=t.length;return 1!==r||n?r>0?Object(z.a)(Object(Qt.a)(t,n),e):Object(z.a)(Object(Bt.b)(n),e):Object(z.a)(Object(Jt.a)(t[0]),e)}}var fr=n(47),pr=n(32),dr=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=fr.a);var i=t.call(this)||this;return i.source=e,i.delayTime=n,i.scheduler=r,(!Object(pr.a)(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=fr.a),i}return r.a(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=fr.a),new e(t,n,r)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,r=this.source;return this.scheduler.schedule(e.dispatch,n,{source:r,subscriber:t})},e}(vt.a);function br(t,e){return void 0===e&&(e=0),function(n){return n.lift(new yr(t,e))}}var yr=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new dr(e,this.delay,this.scheduler).subscribe(t)},t}();function vr(t,e){return"function"==typeof e?function(n){return n.pipe(vr((function(n,r){return Object(U.a)(t(n,r)).pipe(Object(oe.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new mr(t))}}var mr=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new wr(t,this.project))},t}(),wr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new D.a(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(a.a)(this,t,e,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(s.a);function gr(){return vr(we.a)}function xr(t,e){return e?vr((function(){return t}),e):vr((function(){return t}))}function _r(t){return function(e){return e.lift(new Sr(t))}}var Sr=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new kr(t),r=Object(a.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),kr=function(t){function e(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(s.a);function Or(t){return function(e){return e.lift(new Cr(t))}}var Cr=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new jr(t,this.predicate))},t}(),jr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(v.a),Tr={leading:!0,trailing:!1};function Ir(t,e){return void 0===e&&(e=Tr),function(n){return n.lift(new Nr(t,e.leading,e.trailing))}}var Nr=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new Er(t,this.durationSelector,this.leading,this.trailing))},t}(),Er=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.destination=e,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return r.a(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(a.a)(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,n,r,i){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(s.a);function Rr(t,e,n){return void 0===e&&(e=h.a),void 0===n&&(n=Tr),function(r){return r.lift(new Ar(t,e,n.leading,n.trailing))}}var Ar=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new Pr(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),Pr=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.duration=n,s.scheduler=r,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return r.a(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Fr,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(v.a);function Fr(t){t.subscriber.clearThrottle()}var Vr=n(43);function Dr(t){return void 0===t&&(t=h.a),function(e){return Object(Vr.a)((function(){return e.pipe(Me((function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}}),{current:t.now(),value:void 0,last:void 0}),Object(oe.a)((function(t){var e=t.current,n=t.last,r=t.value;return new Mr(r,e-n)})))}))}}var Mr=function(){return function(t,e){this.value=t,this.interval=e}}(),$r=n(57);function Gr(t,e,n){return void 0===n&&(n=h.a),function(r){var i=ht(t),o=i?+t-n.now():Math.abs(t);return r.lift(new qr(o,i,e,n))}}var qr=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new Wr(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Wr=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=r,s.withObservable=i,s.scheduler=o,s.action=null,s.scheduleTimeout(),s}return r.a(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(a.a)(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(s.a),Lr=n(40);function Ur(t,e){return void 0===e&&(e=h.a),Gr(t,Object(Lr.a)(new $r.a),e)}function Br(t){return void 0===t&&(t=h.a),Object(oe.a)((function(e){return new zr(e,t.now())}))}var zr=function(){return function(t,e){this.value=t,this.timestamp=e}}();function Kr(t,e,n){return 0===n?[e]:(t.push(e),t)}function Yr(){return We(Kr,[])}function Hr(t){return function(e){return e.lift(new Qr(t))}}var Qr=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new Jr(t),r=e.subscribe(n);return r.closed||n.add(Object(a.a)(n,this.windowBoundaries)),r},t}(),Jr=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new pn.a,e.next(n.window),n}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new pn.a;e.next(n)},e}(s.a);function Xr(t,e){return void 0===e&&(e=0),function(n){return n.lift(new Zr(t,e))}}var Zr=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new ti(t,this.windowSize,this.startWindowEvery))},t}(),ti=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=n,i.startWindowEvery=r,i.windows=[new pn.a],i.count=0,e.next(i.windows[0]),i}return r.a(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(t);var a=this.count-r+1;if(a>=0&&a%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var u=new pn.a;i.push(u),n.next(u)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(v.a);function ei(t){var e=h.a,n=null,r=Number.POSITIVE_INFINITY;return Object(_.a)(arguments[3])&&(e=arguments[3]),Object(_.a)(arguments[2])?e=arguments[2]:Object(pr.a)(arguments[2])&&(r=arguments[2]),Object(_.a)(arguments[1])?e=arguments[1]:Object(pr.a)(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new ni(t,n,r,e))}}var ni=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new ii(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),ri=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return r.a(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(pn.a),ii=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;s.destination=e,s.windowTimeSpan=n,s.windowCreationInterval=r,s.maxWindowSize=i,s.scheduler=o,s.windows=[];var a=s.openWindow();if(null!==r&&r>=0){var u={subscriber:s,window:a,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:s,scheduler:o};s.add(o.schedule(ai,n,u)),s.add(o.schedule(si,r,c))}else{var l={subscriber:s,window:a,windowTimeSpan:n};s.add(o.schedule(oi,n,l))}return s}return r.a(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new ri;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(v.a);function oi(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function si(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o=n.openWindow(),s={action:this,subscription:null},a={subscriber:n,window:o,context:s};s.subscription=r.schedule(ai,e,a),this.add(s.subscription),this.schedule(t,i)}function ai(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}function ui(t,e){return function(n){return n.lift(new ci(t,e))}}var ci=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new li(t,this.openings,this.closingSelector))},t}(),li=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=Object(a.a)(i,n,n)),i}return r.a(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,s){if(t===this.openings){var u=this.closingSelector,c=Object(i.a)(u)(e);if(c===o.a)return this.error(o.a.e);var l=new pn.a,h=new N.a,f={window:l,subscription:h};this.contexts.push(f);var p=Object(a.a)(this,c,f);p.closed?this.closeWindow(this.contexts.length-1):(p.context=f,h.add(p)),this.destination.next(l)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(s.a);function hi(t){return function(e){return e.lift(new fi(t))}}var fi=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new pi(t,this.closingSelector))},t}(),pi=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.closingSelector=n,r.openWindow(),r}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new pn.a;this.destination.next(n);var r=Object(i.a)(this.closingSelector)();if(r===o.a){var s=o.a.e;this.destination.error(s),this.window.error(s)}else this.add(this.closingNotification=Object(a.a)(this,r))},e}(s.a);function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new bi(r,n))}}var bi=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new yi(t,this.observables,this.project))},t}(),yi=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var o=n.length;i.values=new Array(o);for(var s=0;s<o;s++)i.toRespond.push(s);for(s=0;s<o;s++){var u=n[s];i.add(Object(a.a)(i,u,u,s))}return i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(s.a),vi=n(44);function mi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(vi.b.apply(void 0,[e].concat(t)))}}function wi(t){return function(e){return e.lift(new vi.a(t))}}n.d(e,"audit",(function(){return u})),n.d(e,"auditTime",(function(){return p})),n.d(e,"buffer",(function(){return d})),n.d(e,"bufferCount",(function(){return m})),n.d(e,"bufferTime",(function(){return S})),n.d(e,"bufferToggle",(function(){return E})),n.d(e,"bufferWhen",(function(){return P})),n.d(e,"catchError",(function(){return M})),n.d(e,"combineAll",(function(){return W})),n.d(e,"combineLatest",(function(){return B})),n.d(e,"concat",(function(){return K})),n.d(e,"concatAll",(function(){return Y.a})),n.d(e,"concatMap",(function(){return Q})),n.d(e,"concatMapTo",(function(){return J})),n.d(e,"count",(function(){return X})),n.d(e,"debounce",(function(){return et})),n.d(e,"debounceTime",(function(){return it})),n.d(e,"defaultIfEmpty",(function(){return ut})),n.d(e,"delay",(function(){return pt})),n.d(e,"delayWhen",(function(){return mt})),n.d(e,"dematerialize",(function(){return St})),n.d(e,"distinct",(function(){return Ct})),n.d(e,"distinctUntilChanged",(function(){return It})),n.d(e,"distinctUntilKeyChanged",(function(){return Rt})),n.d(e,"elementAt",(function(){return Ht})),n.d(e,"endWith",(function(){return Xt})),n.d(e,"every",(function(){return Zt})),n.d(e,"exhaust",(function(){return ne})),n.d(e,"exhaustMap",(function(){return se})),n.d(e,"expand",(function(){return ce})),n.d(e,"filter",(function(){return Pt})),n.d(e,"finalize",(function(){return fe})),n.d(e,"find",(function(){return be})),n.d(e,"findIndex",(function(){return me})),n.d(e,"first",(function(){return ge})),n.d(e,"groupBy",(function(){return xe.b})),n.d(e,"ignoreElements",(function(){return _e})),n.d(e,"isEmpty",(function(){return Oe})),n.d(e,"last",(function(){return Ee})),n.d(e,"map",(function(){return oe.a})),n.d(e,"mapTo",(function(){return Re})),n.d(e,"materialize",(function(){return Fe})),n.d(e,"max",(function(){return Le})),n.d(e,"merge",(function(){return Be})),n.d(e,"mergeAll",(function(){return ze.a})),n.d(e,"mergeMap",(function(){return H.a})),n.d(e,"flatMap",(function(){return H.a})),n.d(e,"mergeMapTo",(function(){return Ke})),n.d(e,"mergeScan",(function(){return Ye})),n.d(e,"min",(function(){return Je})),n.d(e,"multicast",(function(){return Ze})),n.d(e,"observeOn",(function(){return en.b})),n.d(e,"onErrorResumeNext",(function(){return nn})),n.d(e,"pairwise",(function(){return sn})),n.d(e,"partition",(function(){return ln})),n.d(e,"pluck",(function(){return hn})),n.d(e,"publish",(function(){return dn})),n.d(e,"publishBehavior",(function(){return yn})),n.d(e,"publishLast",(function(){return mn})),n.d(e,"publishReplay",(function(){return gn})),n.d(e,"race",(function(){return _n})),n.d(e,"reduce",(function(){return We})),n.d(e,"repeat",(function(){return Sn})),n.d(e,"repeatWhen",(function(){return Cn})),n.d(e,"retry",(function(){return In})),n.d(e,"retryWhen",(function(){return Rn})),n.d(e,"refCount",(function(){return Fn.a})),n.d(e,"sample",(function(){return Vn})),n.d(e,"sampleTime",(function(){return $n})),n.d(e,"scan",(function(){return Me})),n.d(e,"sequenceEqual",(function(){return Ln})),n.d(e,"share",(function(){return Yn})),n.d(e,"shareReplay",(function(){return Hn})),n.d(e,"single",(function(){return Qn})),n.d(e,"skip",(function(){return Zn})),n.d(e,"skipLast",(function(){return nr})),n.d(e,"skipUntil",(function(){return or})),n.d(e,"skipWhile",(function(){return ur})),n.d(e,"startWith",(function(){return hr})),n.d(e,"subscribeOn",(function(){return br})),n.d(e,"switchAll",(function(){return gr})),n.d(e,"switchMap",(function(){return vr})),n.d(e,"switchMapTo",(function(){return xr})),n.d(e,"take",(function(){return zt})),n.d(e,"takeLast",(function(){return Te})),n.d(e,"takeUntil",(function(){return _r})),n.d(e,"takeWhile",(function(){return Or})),n.d(e,"tap",(function(){return $t})),n.d(e,"throttle",(function(){return Ir})),n.d(e,"throttleTime",(function(){return Rr})),n.d(e,"throwIfEmpty",(function(){return Lt})),n.d(e,"timeInterval",(function(){return Dr})),n.d(e,"timeout",(function(){return Ur})),n.d(e,"timeoutWith",(function(){return Gr})),n.d(e,"timestamp",(function(){return Br})),n.d(e,"toArray",(function(){return Yr})),n.d(e,"window",(function(){return Hr})),n.d(e,"windowCount",(function(){return Xr})),n.d(e,"windowTime",(function(){return ei})),n.d(e,"windowToggle",(function(){return ui})),n.d(e,"windowWhen",(function(){return hi})),n.d(e,"withLatestFrom",(function(){return di})),n.d(e,"zip",(function(){return mi})),n.d(e,"zipAll",(function(){return wi}))},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(54),o=n(50),s=n(22),a=n(7),u=n(55),c=n(38),l=n(30),h=n(47),f=n(9),p=n(62),d=n(0),b=n(31),y=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return d.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(b.a),v=n(29),m=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(v.a))(y),w=function(t){function e(e,n){void 0===e&&(e=g),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return d.a(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(v.a),g=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return d.a(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(b.a),x=n(49),_=n(5),S=n(1),k=n(20),O=n(34),C=n(18),j=n(19);function T(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var I=n(26),N=n(28),E=n(23),R=n(36),A=n(57),P=n(12),F=n(45),V=n(10),D=n(11);function M(t,e,n){if(e){if(!Object(D.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return M(t,n).apply(void 0,r).pipe(Object(P.a)((function(t){return Object(V.a)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o,s=this,a={context:s,subject:o,callbackFunc:t,scheduler:n};return new r.a((function(r){if(n){var i={args:e,subscriber:r,params:a};return n.schedule($,0,i)}if(!o){o=new l.a;try{t.apply(s,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.next(t.length<=1?t[0]:t),o.complete()}]))}catch(t){Object(F.a)(o)?o.error(t):console.warn(t)}}return o.subscribe(r)}))}}function $(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,s=i.context,a=i.scheduler,u=i.subject;if(!u){u=i.subject=new l.a;try{o.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(a.schedule(G,0,{value:r,subject:u}))}]))}catch(t){u.error(t)}}this.add(u.subscribe(r))}function G(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function q(t,e,n){if(e){if(!Object(D.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return q(t,n).apply(void 0,r).pipe(Object(P.a)((function(t){return Object(V.a)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.a((function(r){var i=o.context,s=o.subject;if(n)return n.schedule(W,0,{params:o,subscriber:r,context:i});if(!s){s=o.subject=new l.a;try{t.apply(i,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?s.error(n):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(t){Object(F.a)(s)?s.error(t):console.warn(t)}}return s.subscribe(r)}))}}function W(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,s=n.args,a=n.scheduler,u=n.subject;if(!u){u=n.subject=new l.a;try{o.apply(i,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(a.schedule(U,0,{err:r,subject:u}));else{var i=t.length<=1?t[0]:t;e.add(a.schedule(L,0,{value:i,subject:u}))}}]))}catch(t){this.add(a.schedule(U,0,{err:t,subject:u}))}}this.add(u.subscribe(r))}function L(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function U(t){var e=t.err;t.subject.error(e)}var B=n(41),z=n(24),K=n(43),Y=n(8),H=n(3);function Q(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Object(V.a)(e[0])&&(e=e[0]),0===e.length?Y.a:t?Q(e).pipe(Object(P.a)((function(e){return t.apply(void 0,e)}))):new r.a((function(t){return new J(t,e)}))}var J=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var s=n[o],a=Object(H.a)(r,s,null,o);a&&r.add(a)}return r}return d.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()},e}(n(4).a),X=n(14),Z=n(27);Object.prototype.toString;function tt(t,e,n,i){return Object(Z.a)(n)&&(i=n,n=void 0),i?tt(t,e,n).pipe(Object(P.a)((function(t){return Object(V.a)(t)?i.apply(void 0,t):i(t)}))):new r.a((function(r){!function t(e,n,r,i,o){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(n,r,o),s=function(){return a.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),s=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),s=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,h=e.length;l<h;l++)t(e[l],n,r,i,o)}i.add(s)}(t,e,(function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)}),r,n)}))}function et(t,e,n){return n?et(t,e).pipe(Object(P.a)((function(t){return Object(V.a)(t)?n.apply(void 0,t):n(t)}))):new r.a((function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(Object(Z.a)(e))return function(){return e(i,r)}}))}function nt(t,e,n,i,o){var s,a;if(1==arguments.length){var u=t;a=u.initialState,e=u.condition,n=u.iterate,s=u.resultSelector||j.a,o=u.scheduler}else void 0===i||Object(D.a)(i)?(a=t,s=j.a,o=i):(a=t,s=i);return new r.a((function(t){var r=a;if(o)return o.schedule(rt,0,{subscriber:t,iterate:n,condition:e,resultSelector:s,state:r});for(;;){if(e){var i=void 0;try{i=e(r)}catch(e){return void t.error(e)}if(!i){t.complete();break}}var u=void 0;try{u=s(r)}catch(e){return void t.error(e)}if(t.next(u),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}}))}function rt(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function it(t,e,n){return void 0===e&&(e=Y.a),void 0===n&&(n=Y.a),Object(K.a)((function(){return t()?e:n}))}var ot=n(32);function st(t,e){return void 0===t&&(t=0),void 0===e&&(e=f.a),(!Object(ot.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=f.a),new r.a((function(n){return n.add(e.schedule(at,t,{subscriber:n,counter:0,period:t})),n}))}function at(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var ut=n(59),ct=new r.a(C.a);function lt(){return ct}var ht=n(39);function ft(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return Y.a;var n=t[0],i=t.slice(1);return 1===t.length&&Object(V.a)(n)?ft.apply(void 0,n):new r.a((function(t){var e=function(){return t.add(ft.apply(void 0,i).subscribe(t))};return Object(X.a)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function pt(t,e){return e?new r.a((function(n){var r=Object.keys(t),i=new _.a;return i.add(e.schedule(dt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i})):new r.a((function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()}))}function dt(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var s=e[n];r.next([s,o[s]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var bt=n(60);function yt(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new r.a((function(r){var i=0,o=t;if(n)return n.schedule(vt,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}}))}function vt(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}var mt=n(40),wt=n(61);function gt(t,e){return new r.a((function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?Object(X.a)(i):Y.a).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}var xt=n(44),_t=n(17);n.d(e,"Observable",(function(){return r.a})),n.d(e,"ConnectableObservable",(function(){return i.a})),n.d(e,"GroupedObservable",(function(){return o.a})),n.d(e,"observable",(function(){return s.a})),n.d(e,"Subject",(function(){return a.a})),n.d(e,"BehaviorSubject",(function(){return u.a})),n.d(e,"ReplaySubject",(function(){return c.a})),n.d(e,"AsyncSubject",(function(){return l.a})),n.d(e,"asapScheduler",(function(){return h.a})),n.d(e,"asyncScheduler",(function(){return f.a})),n.d(e,"queueScheduler",(function(){return p.a})),n.d(e,"animationFrameScheduler",(function(){return m})),n.d(e,"VirtualTimeScheduler",(function(){return w})),n.d(e,"VirtualAction",(function(){return g})),n.d(e,"Scheduler",(function(){return x.a})),n.d(e,"Subscription",(function(){return _.a})),n.d(e,"Subscriber",(function(){return S.a})),n.d(e,"Notification",(function(){return k.a})),n.d(e,"pipe",(function(){return O.a})),n.d(e,"noop",(function(){return C.a})),n.d(e,"identity",(function(){return j.a})),n.d(e,"isObservable",(function(){return T})),n.d(e,"ArgumentOutOfRangeError",(function(){return I.a})),n.d(e,"EmptyError",(function(){return N.a})),n.d(e,"ObjectUnsubscribedError",(function(){return E.a})),n.d(e,"UnsubscriptionError",(function(){return R.a})),n.d(e,"TimeoutError",(function(){return A.a})),n.d(e,"bindCallback",(function(){return M})),n.d(e,"bindNodeCallback",(function(){return q})),n.d(e,"combineLatest",(function(){return B.b})),n.d(e,"concat",(function(){return z.a})),n.d(e,"defer",(function(){return K.a})),n.d(e,"empty",(function(){return Y.b})),n.d(e,"forkJoin",(function(){return Q})),n.d(e,"from",(function(){return X.a})),n.d(e,"fromEvent",(function(){return tt})),n.d(e,"fromEventPattern",(function(){return et})),n.d(e,"generate",(function(){return nt})),n.d(e,"iif",(function(){return it})),n.d(e,"interval",(function(){return st})),n.d(e,"merge",(function(){return ut.a})),n.d(e,"never",(function(){return lt})),n.d(e,"of",(function(){return ht.a})),n.d(e,"onErrorResumeNext",(function(){return ft})),n.d(e,"pairs",(function(){return pt})),n.d(e,"race",(function(){return bt.a})),n.d(e,"range",(function(){return yt})),n.d(e,"throwError",(function(){return mt.a})),n.d(e,"timer",(function(){return wt.a})),n.d(e,"using",(function(){return gt})),n.d(e,"zip",(function(){return xt.b})),n.d(e,"EMPTY",(function(){return Y.a})),n.d(e,"NEVER",(function(){return ct})),n.d(e,"config",(function(){return _t.a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return h}));var r=n(0),i=n(7),o=n(2),s=n(1),a=n(5),u=n(37),c=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=a.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return Object(u.a)()(this)},e}(o.a),l=c.prototype,h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}},f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);s.a},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(0),i=n(7),o=n(23),s=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r.a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u}));var r=n(0),i=n(1),o=n(20);function s(t,e){return void 0===e&&(e=0),function(n){return n.lift(new a(t,e))}}var a=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.scheduler,this.delay))},t}(),u=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r.a(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.a.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.a.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(o.a.createComplete()),this.unsubscribe()},e}(i.a),c=function(){return function(t,e){this.notification=t,this.destination=e}}()},function(t,e,n){"use strict";function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}n.d(e,"a",(function(){return i})),r.prototype=Object.create(Error.prototype);var i=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(42);function i(){return Object(r.a)(1)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2),i=n(11),o=n(42),s=n(15);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,a=null,u=t[t.length-1];return Object(i.a)(u)?(a=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===a&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(n)(Object(s.a)(t,a))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(0),i=n(10),o=n(15),s=n(4),a=n(3);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(i.a)(t[0]))return t[0];t=t[0]}return Object(o.a)(t,void 0).lift(new c)}var c=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}(),l=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.a(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Object(a.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2),i=n(9),o=n(32),s=n(11);function a(t,e,n){void 0===t&&(t=0);var a=-1;return Object(o.a)(e)?a=Number(e)<1?1:Number(e):Object(s.a)(e)&&(n=e),Object(s.a)(n)||(n=i.a),new r.a((function(e){var r=Object(o.a)(t)?t:+t-n.now();return n.schedule(u,r,{index:0,period:a,subscriber:e})}))}function u(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},function(t,e,n){"use strict";var r=n(0),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n(31).a),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e}(n(29).a);n.d(e,"a",(function(){return s}));var s=new o(i)},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.a(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(5).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(2),i=n(65),o=n(70),s=n(71),a=n(67),u=n(68),c=n(69),l=n(63),h=n(21),f=n(22),p=function(t){if(t instanceof r.a)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[f.a])return Object(a.a)(t);if(Object(u.a)(t))return Object(i.a)(t);if(Object(c.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[h.a])return Object(s.a)(t);var e=Object(l.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(22),i=function(t){return function(e){var n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},function(t,e,n){"use strict";function r(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(33),i=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,r.a),e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(21),i=function(t){return function(e){for(var n=t[r.a]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e}}},function(t,e,n){var r;void 0===(r=function(t,e){"use strict";function n(){return!!window.location.href.match(/\/tools\/new-answers-old-questions/)}function r(){return!!window.location.href.match(/\/admin/)}function i(){return!!window.location.href.match(/\/questions\/\d+.*/)}function o(){return!!window.location.href.match(/\/users\/flag-summary\//)}function s(){return!!window.location.href.match(/\/users\/\d+.*/)}function a(t){let e=t.text();if(-1!==e.indexOf("k")&&(e=t.attr("title").substr("reputation score ".length)),e=e.replace(",",""),""!==e.trim())return parseInt(e,10)}function u(t){const e=t.find("a"),n=e.text(),r=e.attr("href");let i;return r&&(i=parseInt(r.split("/")[2],10)),{authorName:n,authorId:i}}function c(t){t.hasClass("relativetime")||(t=t.find(".relativetime"));return l(t.attr("title"))}function l(t){return new Date(t.replace(" ","T"))}Object.defineProperty(e,"__esModule",{value:!0}),$.event.special.destroyed={remove:t=>{t.handler&&t.handler()}},e.IsStackOverflow=function(){return!!window.location.href.match(/^https:\/\/stackoverflow.com/)},e.isNatoPage=n,e.isModPage=r,e.isQuestionPage=i,e.isFlagsPage=o,e.isUserPage=s,e.parseQuestionsAndAnswers=function(t){n()?function(t){const e=$(".answer-hyperlink").parent().parent();for(let n=0;n<e.length;n++){const r=$(e[n]),i=parseInt(r.find(".answer-hyperlink").attr("href").split("#")[1],10),o=c(r.find(".user-action-time")),s=c(r.find("td .relativetime")),l=a(r.find(".reputation-score")),{authorName:h,authorId:f}=u(r.find(".user-details"));t({type:"Answer",element:r,page:"NATO",postId:i,answerTime:o,questionTime:s,authorReputation:l,authorName:h,authorId:f})}}(t):i()?function(t){function e(t){const e=parseInt(t.find(".vote-count-post").text(),10),n=a(t.find(".user-info .reputation-score").last()),{authorName:r,authorId:i}=u(t.find(".user-info .user-details").last());return{score:e,authorReputation:n,authorName:r,authorId:i,postTime:c(t.find(".user-info .relativetime").last())}}let n;const r=i=>{const o=parseInt(i.attr("data-questionid"),10),s=e(i);i.find(".postcell").bind("destroyed",()=>{setTimeout(()=>{const t=$(`[data-questionid="${o}"]`);r(t)})}),n={type:"Question",element:i,page:"Question",postId:o,postTime:s.postTime,score:s.score,authorReputation:s.authorReputation,authorName:s.authorName,authorId:s.authorId},t(n)},i=$(".question");r(i);const o=$(".answer");for(let r=0;r<o.length;r++){const i=r=>{const o=parseInt(r.attr("data-answerid"),10),s=e(r);r.find(".answercell").bind("destroyed",()=>{setTimeout(()=>{const t=$("#answer-"+o);i(t)})}),t({type:"Answer",element:r,page:"Question",postId:o,question:n,postTime:s.postTime,score:s.score,authorReputation:s.authorReputation,authorName:s.authorName,authorId:s.authorId})},s=$(o[r]);i(s)}}(t):o()?function(t){const e=$(".flagged-post");for(let n=0;n<e.length;n++){const r=$(e[n]),i=r.find(".answer-hyperlink").length?"Answer":"Question",o=parseInt("Answer"===i?r.find(".answer-hyperlink").attr("href").split("#")[1]:r.find(".question-hyperlink").attr("href").split("/")[2],10),s=parseInt(r.find(".answer-votes").text(),10),{authorName:a,authorId:l}=u(r.find(".post-user-info")),h=c(r.find(".post-user-info .relativetime")),f=c(r.find(".mod-flag .relativetime")),p=r.find(".flag-outcome").text().trim().split(" - ");t({type:i,element:r,page:"Flags",postId:o,score:s,postTime:h,handledTime:f,handledResult:p[0].trim(),handledComment:p.slice(1).join(" - ").trim(),authorName:a,authorId:l})}}(t):r()||s()||StackExchange.options.user.isModerator||function(t){const e=$(".question-hyperlink");for(let n=0;n<e.length;n++){const r=$(e[n]);let i=r.attr("href").split("/")[2];i.indexOf("_")>=0&&(i=i.split("_")[1]);t({type:"Question",element:r,page:"Unknown",postId:parseInt(i,10)})}const n=$(".answer-hyperlink");for(let e=0;e<n.length;e++){const r=$(n[e]);let i=r.attr("href").split("#")[1];i.indexOf("_")>=0&&(i=i.split("_")[1]);t({type:"Answer",element:r,page:"Unknown",postId:parseInt(i,10)})}}(t)},e.parseDate=l}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){var r,i;r=[n,e,n(74),n(72),n(77),n(78),n(76),n(79),n(80),n(81),n(51)],void 0===(i=function(t,e,n,r,i,o,s,a,u,c,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.metaSmokeKey="0a946b9419b5842f99b052d19c956302aa6c6dd5a420b043b20072ad2efc29e0";e.ConfigurationOpenOnHover="AdvancedFlagging.Configuration.OpenOnHover",e.ConfigurationDefaultNoFlag="AdvancedFlagging.Configuration.DefaultNoFlag",e.ConfigurationDefaultNoComment="AdvancedFlagging.Configuration.DefaultNoComment",e.ConfigurationWatchFlags="AdvancedFlagging.Configuration.WatchFlags",e.ConfigurationWatchQueues="AdvancedFlagging.Configuration.WatchQueues",e.ConfigurationDetectAudits="AdvancedFlagging.Configuration.DetectAudits",e.ConfigurationEnabledFlags="AdvancedFlagging.Configuration.EnabledFlags",e.ConfigurationLinkDisabled="AdvancedFlagging.Configuration.LinkDisabled";const h=$("<div>").addClass("hide").hide().attr("id","snackbar");let f=null,p=null;function d(t,e,n,r){const i=$("<div>").css({"background-color":e,padding:"10px"}).text(t);n&&i.css("color",n),h.append(i),h.removeClass("hide").addClass("show").show(),p&&clearTimeout(p),f&&clearTimeout(f),f=setTimeout((function(){h.removeClass("show").addClass("hide"),p=setTimeout(()=>{h.empty().hide()},1e3)}),void 0===r?2e3:r)}function b(t){d(t,"#00690c")}function y(t){d(t,"#ba1701")}async function v(t,i,o,s,a,u,c,h,f,p,d,v){const g=()=>$("<hr>").attr("class","advanced-flagging-hr"),x=$("<dl>").attr("class","advanced-flagging-dialog s-anchors s-anchors__default d-none"),_="comment_checkbox_"+i,S="flag_checkbox_"+i,k=$("<input>").attr("type","checkbox").attr("name",_).attr("id",_).attr("class","s-checkbox").wrap('<div class="grid--cell"></div>').parent(),O=k.clone().find("input").attr("name",S).attr("id",S).parent();O.find("input").prop("checked",!0);const C=r.IsStackOverflow(),j=t.find(".comment-body");!l.GreaseMonkeyCache.GetFromCache(e.ConfigurationDefaultNoComment)&&0===j.length&&C&&k.find("input").prop("checked",!0);const T=l.GreaseMonkeyCache.GetFromCache(e.ConfigurationEnabledFlags);let I=!1,N=!0;if(n.flagCategories.forEach(e=>{if(-1===e.AppliesTo.indexOf(o))return;const n=g();N||x.append(n);let r=e.FlagTypes.length;e.FlagTypes.forEach(o=>{o.GetComment&&(I=!0);const l=$("<dd>").attr("class","advanced-flagging-dropdown-item");e.IsDangerous&&l.addClass("advanced-flagging-danger-item");const g=$("<a>").attr("class","advanced-flagging-report-link"),_=()=>{r++,g.addClass("d-block").removeClass("d-none"),n&&r>0&&n.addClass("d-block").removeClass("d-none")};let S;r--,g.addClass("d-none").removeClass("d-block"),n&&r<=0&&n.addClass("d-none").removeClass("d-block"),(!T||T.indexOf(o.Id)>-1)&&(o.Enabled?v.then(t=>{if(o.Enabled){const e=t.length>0;o.Enabled(e)&&_()}else _()}):_()),o.GetComment&&(S=o.GetComment({Reputation:s,AuthorName:a}),g.attr("title",S)),g.click(()=>{if(!h)try{if(!k.find("input").is(":checked")){if(S){let e=S.replace(/\[([^\]]+)\]\(([^\)]+)\)/g,"$1");e=e.replace(/\[([^\]]+)\][^\(]*?/g,"$1"),e=e.replace(/_([^_]+)_/g,"$1"),e=e.replace(/\*\*([^\*]+)\*\*/g,"$1"),e=e.replace(/\*([^\*]+)\*/g,"$1"),t.find(".comment-body .comment-copy").each((t,n)=>{const r=$(n);let i=r.text();i.endsWith(" - From Review")&&(i=i.substring(0,i.length-" - From Review".length)),i===e&&r.closest("li").find("a.comment-up.comment-up-off").trigger("click")})}S=void 0}const e=function(t,e,n,r,i){const o={};return r&&(o.CommentPromise=new Promise((e,n)=>{$.ajax({url:`/posts/${t}/comments`,type:"POST",data:{fkey:StackExchange.options.user.fkey,comment:r}}).done(t=>{e(t)}).fail((t,e,r)=>{n({jqXHR:t,textStatus:e,errorThrown:r})})})),n&&"NoFlag"!==e.ReportType&&("PostOther"===e.ReportType?o.FlagPromise=new Promise((n,r)=>{i.then(i=>{if(e.GetCustomFlagText&&i.length>0){const o=e.GetCustomFlagText(i[0]);w=!0,$.ajax({url:`//${window.location.hostname}/flags/posts/${t}/add/${e.ReportType}`,type:"POST",data:{fkey:StackExchange.options.user.fkey,otherText:o}}).done(t=>{setTimeout(()=>w=!1,500),n(t)}).fail((t,e,n)=>{r({jqXHR:t,textStatus:e,errorThrown:n})})}})}):o.FlagPromise=new Promise((n,r)=>{w=!0,$.ajax({url:`//${window.location.hostname}/flags/posts/${t}/add/${e.ReportType}`,type:"POST",data:{fkey:StackExchange.options.user.fkey,otherText:""}}).done(t=>{setTimeout(()=>w=!1,500),n(t)}).fail((t,e,n)=>{r({jqXHR:t,textStatus:e,errorThrown:n})})})),o}(i,o,O.find("input").is(":checked"),S,v);e.CommentPromise&&e.CommentPromise.then(t=>{const e=StackExchange.comments.uiForPost($("#comments-"+i));e.addShow(!0,!1),e.showComments(t,null,!1,!0),$(document).trigger("comment",i)}).catch(t=>{y("Failed to comment on post"),console.log(t)}),e.FlagPromise&&e.FlagPromise.then(()=>{const t=new Date;t.setDate(t.getDate()+30),f.attr("title","Flagged as "+o.ReportType),f.addClass("d-inline-block").removeClass("d-none"),b("Flagged")}).catch(t=>{y("Failed to flag post"),console.log(t)})}catch(t){y(t)}if("NoFlag"===o.ReportType){const t=new Date;t.setDate(t.getDate()+30),p.attr("title","Performed action: "+o.DisplayName),p.addClass("d-block").removeClass("d-none")}m(o,d,u,c),x.removeClass("d-block").addClass("d-none")}),g.text(o.DisplayName),l.append(g),x.append(l)}),N=!1}),C||(I=!1),x.append(g()),I){const t=$("<label>").text("Leave comment").attr("for",_).attr("class","advanced-flagging-label-options grid--cell s-label fw-normal"),e=$("<dd />");e.append(k),e.append(t),x.append(e),e.children().wrapAll('<div class="grid gs8"></div>')}const E=$("<label>").text("Flag").attr("for",S).attr("class","advanced-flagging-label-options grid--cell s-label fw-normal"),R=$("<dd />");return l.GreaseMonkeyCache.GetFromCache(e.ConfigurationDefaultNoFlag)&&O.find("input").prop("checked",!1),R.append(O),R.append(E),x.append(R),R.children().wrapAll('<div class="grid gs8"></div>'),x}function m(t,e,n,r){const i="PostSpam"===t.ReportType||"PostOffensive"===t.ReportType,o="AnswerNotAnAnswer"===t.ReportType,s="PostOther"===t.ReportType,a="NoFlag"===t.ReportType;for(let u=0;u<e.length;u++){const c=e[u];let l=null;if(i)l=c.ReportRedFlag();else if(o)l=c.ReportNaa(n,r);else if(a)switch(t.DisplayName){case"Needs Editing":l=c.ReportNeedsEditing();break;case"Vandalism":l=c.ReportVandalism();break;default:l=c.ReportLooksFine()}else if(s)switch(t.DisplayName){case"Duplicate answer":l=c.ReportDuplicateAnswer();break;case"Plagiarism":case"Bad attribution":l=c.ReportPlagiarism();break;default:throw new Error("Could not find custom flag type: "+t.DisplayName)}l&&l.then(t=>{t&&b("Feedback sent to "+c.name)}).catch(()=>{y(`Failed to send feedback to ${c.name}.`)})}}e.displaySuccess=b;let w=!1;async function g(){r.parseQuestionsAndAnswers(async t=>{if(!t.element.length)return;let n,r=null;const c=$("<div>").attr("title","Reported by Natty").attr("class","advanced-flagging-icon advanced-flagging-natty-icon d-none").click(()=>{window.open("https://sentinel.erwaysoftware.com/posts/aid/"+t.postId,"_blank")}),h=t=>t.addClass("d-inline-block").removeClass("d-none"),f=$("<div>").attr("title","Reported by Guttenberg").attr("class","advanced-flagging-icon advanced-flagging-gut-icon d-none"),p=new a.CopyPastorAPI(t.postId,"wgixsmuiz8q8px9kyxgwf8l71h7a41uugfh5rkyj"),d=p.Watch(),y=$("<div>").attr("title","Reported by Smokey").attr("class","advanced-flagging-icon advanced-flagging-smokey-icon d-none"),g=[];if("Answer"===t.type){const e=new i.NattyAPI(t.postId);e.Watch().subscribe(t=>{t?h(c):c.addClass("d-none")}),g.push({name:"Natty",ReportNaa:(t,n)=>e.ReportNaa(t,n),ReportRedFlag:()=>e.ReportRedFlag(),ReportLooksFine:()=>e.ReportLooksFine(),ReportNeedsEditing:()=>e.ReportNeedsEditing(),ReportVandalism:()=>Promise.resolve(!1),ReportDuplicateAnswer:()=>Promise.resolve(!1),ReportPlagiarism:()=>Promise.resolve(!1)}),d.subscribe(t=>{t.length?(f.attr("Title","Reported by CopyPastor - "+t.length),h(f),f.click(()=>t.forEach(t=>{window.open("https://copypastor.sobotics.org/posts/"+t.post_id)}))):f.addClass("d-none")}),g.push({name:"Guttenberg",ReportNaa:()=>p.ReportFalsePositive(),ReportRedFlag:()=>Promise.resolve(!1),ReportLooksFine:()=>p.ReportFalsePositive(),ReportNeedsEditing:()=>p.ReportFalsePositive(),ReportVandalism:()=>p.ReportFalsePositive(),ReportDuplicateAnswer:()=>p.ReportTruePositive(),ReportPlagiarism:()=>p.ReportTruePositive()});const n=new o.GenericBotAPI(t.postId);g.push({name:"Generic Bot",ReportNaa:()=>n.ReportNaa(),ReportRedFlag:()=>Promise.resolve(!1),ReportLooksFine:()=>n.ReportLooksFine(),ReportNeedsEditing:()=>n.ReportNeedsEditing(),ReportVandalism:()=>Promise.resolve(!0),ReportDuplicateAnswer:()=>Promise.resolve(!1),ReportPlagiarism:()=>Promise.resolve(!1)})}const x=new s.MetaSmokeAPI;x.Watch(t.postId,t.type).subscribe(t=>{null!==t?(y.click(()=>{window.open("https://metasmoke.erwaysoftware.com/post/"+t,"_blank")}),h(y)):y.addClass("d-none")}),g.push({name:"Smokey",ReportNaa:()=>x.ReportNaa(t.postId,t.type),ReportRedFlag:()=>x.ReportRedFlag(t.postId,t.type),ReportLooksFine:()=>x.ReportLooksFine(t.postId,t.type),ReportNeedsEditing:()=>x.ReportNeedsEditing(t.postId,t.type),ReportVandalism:()=>x.ReportVandalism(t.postId,t.type),ReportDuplicateAnswer:()=>Promise.resolve(!1),ReportPlagiarism:()=>Promise.resolve(!1)});const _=$("<div>").attr("class","comment-flag advanced-flagging-performed-action d-none"),S=$("<div>").attr("class","comment-flag advanced-flagging-flag-icon d-none").append('<svg aria-hidden="true" class="svg-icon iconFlag" width="18" height="18" viewBox="0 0 18 18"><path d="M3 2v14h2v-6h3.6l.4 1h6V3H9.5L9 2z"></path></svg>');if("Question"===t.page){let i,o;n=n=t.element.find(".js-post-menu").children().first(),r=$("<button>").attr("type","button").attr("class","s-btn s-btn__link advanced-flagging-link").text("Advanced Flagging"),"Answer"===t.type?(i=t.question.postTime,o=t.postTime):(i=t.postTime,o=t.postTime);const s=t.element.hasClass("deleted-answer"),a=l.GreaseMonkeyCache.GetFromCache(e.ConfigurationWatchFlags);u.WatchFlags().subscribe(e=>{if(a&&!w){const n=new RegExp(`/flags/posts/${t.postId}/add/(AnswerNotAnAnswer|PostOffensive|PostSpam|NoFlag|PostOther)`).exec(e.responseURL);if(null!==n&&200===e.status){const t={Id:0,ReportType:n[1],DisplayName:n[1]};m(t,g,o,i);const e=new Date;e.setDate(e.getDate()+30),S.attr("title","Flagged as "+t.ReportType),h(S),b("Flagged")}}});if(!l.GreaseMonkeyCache.GetFromCache(e.ConfigurationLinkDisabled)){const a=await v(t.element,t.postId,t.type,t.authorReputation,t.authorName,o,i,s,S,_,g,p.Promise());r.append(a);const u=r;l.GreaseMonkeyCache.GetFromCache(e.ConfigurationOpenOnHover)?(u.hover(t=>{t.stopPropagation(),t.target===u.get(0)&&a.removeClass("d-none").addClass("d-block")}),u.mouseleave(t=>{t.stopPropagation(),a.removeClass("d-block").addClass("d-none")})):(u.click(t=>{t.stopPropagation(),t.target===u.get(0)&&a.removeClass("d-none").addClass("d-block")}),$(window).click(()=>{a.removeClass("d-block").addClass("d-none")})),n.append($("<div>").attr("class","grid--cell").append(r))}n.append(_),n.append(S),n.append(c),n.append(f),n.append(y)}else n=t.element.find("a.answer-hyperlink"),n.after(y),n.after(f),n.after(c),n.after(S),n.after(_)})}async function x(){const t=localStorage.getItem("MetaSmoke.ManualKey");t?(localStorage.removeItem("MetaSmoke.ManualKey"),s.MetaSmokeAPI.Setup(e.metaSmokeKey,async()=>t)):s.MetaSmokeAPI.Setup(e.metaSmokeKey),g(),function(){const t=document.createElement("style");t.type="text/css",t.id="advanced-flagging-styles",t.textContent='\n#snackbar {\n    min-width: 250px;\n    margin-left: -125px;\n    color: #fff;\n    text-align: center;\n    border-radius: 2px;\n    padding: 16px;\n    position: fixed;\n    z-index: 2000;\n    left: 50%;\n    top: 30px;\n    font-size: 17px;\n}\n\n#snackbar.show {\n    opacity: 1;\n    transition: opacity 1s ease-out;\n    -ms-transition: opacity 1s ease-out;\n    -moz-transition: opacity 1s ease-out;\n    -webkit-transition: opacity 1s ease-out;\n}\n\n#snackbar.hide {\n    opacity: 0;\n    transition: opacity 1s ease-in;\n    -ms-transition: opacity 1s ease-in;\n    -moz-transition: opacity 1s ease-in;\n    -webkit-transition: opacity 1s ease-in;\n}\n\n.advanced-flagging-dialog {\n    margin: 0;\n    z-index: 3;\n    position: absolute;\n    white-space: nowrap;\n    background: #FFF;\n    padding: 5px;\n    border: 1px solid #9fa6ad;\n    box-shadow: 0 2px 4px rgba(36,39,41,0.3);\n    cursor: default\n}\n\n.advanced-flagging-hr {\n    margin-bottom: 10px;\n    margin-top: 10px;\n}\n\n.advanced-flagging-label-options {\n    margin-right: 5px;\n    margin-left: 4px;\n}\n\n.advanced-flagging-icon {\n    width: 15px;\n    height: 15px;\n    margin-left: 5px;\n    margin-top: 5px;\n    vertical-align: text-bottom;\n    cursor: pointer;\n    background-size: 100%;\n}\n\n.advanced-flagging-natty-icon {\n    background-image: url("https://i.stack.imgur.com/aMUMt.jpg?s=128&g=1");\n}\n\n.advanced-flagging-gut-icon {\n    background-image: url("https://i.stack.imgur.com/A0JRA.png?s=128&g=1");\n}\n\n.advanced-flagging-smokey-icon {\n    background-image: url("https://i.stack.imgur.com/7cmCt.png?s=128&g=1");\n}\n\n.advanced-flagging-dropdown-item {\n    padding: 1px 5px;\n}\n\n.advanced-flagging-danger-item {\n    background-color: rgba(241, 148, 148, 0.6);\n}\n\n.advanced-flagging-report-link {\n    display: inline-block;\n    margin-top: 5px;\n    width: auto;\n}\n\n.advanced-flagging-performed-action {\n    margin-left: 5px;\n    background-position: -20px -320px;\n    visibility: visible;\n    width: 15px;\n    height: 15px;\n    cursor: default;\n}\n\n.advanced-flagging-flag-icon {\n    color: #C91D2E;\n    cursor: default;\n}\n',(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(t)}(),c.SetupConfiguration(),document.body.appendChild(h.get(0));const n=l.GreaseMonkeyCache.GetFromCache(e.ConfigurationWatchQueues),o=[];n&&u.WatchRequests().subscribe(t=>{if(null!==/(\/review\/next-task)|(\/review\/task-reviewed\/)/.exec(t.responseURL)&&200===t.status){return void(t=>{const e=t.postId,n=$(t.content);o[e]={questionTime:r.parseDate($(".post-signature.owner .user-action-time span",n).attr("title")),answerTime:r.parseDate($(".user-info .user-action-time span",n).attr("title"))}})(JSON.parse(t.responseText))}const e=/(\d+)\/vote\/10|(\d+)\/recommend-delete/.exec(t.responseURL);if(null!==e&&200===t.status){const t=e[1]||e[2],n=parseInt(t,10),r=o[n];if(r&&$(".answers-subheader").length>0){const t=new i.NattyAPI(n);t.Watch(),m({Id:0,ReportType:"AnswerNotAnAnswer",DisplayName:"AnswerNotAnAnswer"},[{name:"Natty",ReportNaa:(e,n)=>t.ReportNaa(e,n),ReportRedFlag:()=>t.ReportRedFlag(),ReportLooksFine:()=>t.ReportLooksFine(),ReportNeedsEditing:()=>t.ReportNeedsEditing(),ReportVandalism:()=>Promise.resolve(!1),ReportDuplicateAnswer:()=>Promise.resolve(!1),ReportPlagiarism:()=>Promise.resolve(!1)}],r.answerTime,r.questionTime)}}})}$(()=>{let t=!1;async function e(){t||(t=!0,await x()),$(window).off("focus",e),$(window).off("mousemove",e)}$(window).focus(e),$(window).mousemove(e),document.hasFocus&&document.hasFocus()&&e()})}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flagCategories=[{IsDangerous:!0,AppliesTo:["Answer","Question"],FlagTypes:[{Id:1,DisplayName:"Spam",ReportType:"PostSpam"},{Id:2,DisplayName:"Rude or Abusive",ReportType:"PostOffensive"}]},{IsDangerous:!0,AppliesTo:["Answer"],FlagTypes:[{Id:3,DisplayName:"Plagiarism",ReportType:"PostOther",Enabled:t=>t,GetCustomFlagText:t=>`Possible plagiarism of another answer https:${t.target_url}, as can be seen here https://copypastor.sobotics.org/posts/${t.post_id}`},{Id:4,DisplayName:"Duplicate answer",ReportType:"PostOther",Enabled:t=>t,GetComment:()=>"Please don't add the [same answer to multiple questions](https://meta.stackexchange.com/questions/104227/is-it-acceptable-to-add-a-duplicate-answer-to-several-questions). Answer the best one and flag the rest as duplicates, once you earn enough reputation. If it is not a duplicate, [edit] the answer and tailor the post to the question.",GetCustomFlagText:t=>`The answer is a repost of their other answer https:${t.target_url}, but as there are slight differences as seen here https://copypastor.sobotics.org/posts/${t.post_id}, an auto flag wouldn't be raised.`},{Id:18,DisplayName:"Bad attribution",ReportType:"PostOther",Enabled:t=>t,GetCustomFlagText:t=>`This post is copied from [another answer](https:${t.target_url}), as can be seen [here](https://copypastor.sobotics.org/posts/${t.post_id}). The author only added a link to the other answer, which is [not the proper way of attribution](https://stackoverflow.blog/2009/06/25/attribution-required/).`}]},{IsDangerous:!1,AppliesTo:["Answer"],FlagTypes:[{Id:5,DisplayName:"Link Only",ReportType:"AnswerNotAnAnswer",GetComment:()=>"A link to a solution is welcome, but please ensure your answer is useful without it: [add context around the link](//meta.stackexchange.com/a/8259) so your fellow users will have some idea what it is and why its there, then quote the most relevant part of the page you're linking to in case the target page is unavailable. [Answers that are little more than a link may be deleted.](/help/deleted-answers)"},{Id:6,DisplayName:"Not an answer",ReportType:"AnswerNotAnAnswer",GetComment:t=>t.Reputation<50?"This does not provide an answer to the question. You can [search for similar questions](/search), or refer to the related and linked questions on the right-hand side of the page to find an answer. If you have a related but different question, [ask a new question](/questions/ask), and include a link to this one to help provide context. See: [Ask questions, get answers, no distractions](/tour)":"This post doesn't look like an attempt to answer this question. Every post here is expected to be an explicit attempt to *answer* this question; if you have a critique or need a clarification of the question or another answer, you can [post a comment](/help/privileges/comment) (like this one) directly below it. Please remove this answer and create either a comment or a new question. See: [Ask questions, get answers, no distractions](/tour)"},{Id:7,DisplayName:"Thanks",ReportType:"AnswerNotAnAnswer",GetComment:t=>t.Reputation<15?"Please don't add _\"thanks\"_ as answers. They don't actually provide an answer to the question, and can be perceived as noise by its future visitors. Once you [earn](https://meta.stackoverflow.com/q/146472) enough [reputation](/help/whats-reputation), you will gain privileges to [upvote answers](/help/privileges/vote-up) you like. This way future visitors of the question will see a higher vote count on that answer, and the answerer will also be rewarded with reputation points. See [Why is voting important](/help/why-vote).":"Please don't add _\"thanks\"_ as answers. They don't actually provide an answer to the question, and can be perceived as noise by its future visitors. Instead, [upvote answers](/help/privileges/vote-up) you like. This way future visitors of the question will see a higher vote count on that answer, and the answerer will also be rewarded with reputation points. See [Why is voting important](/help/why-vote)."},{Id:8,DisplayName:"Me too",ReportType:"AnswerNotAnAnswer",GetComment:()=>"Please don't add *\"Me too\"* as answers. It doesn't actually provide an answer to the question. If you have a different but related question, then [ask](/questions/ask) it (reference this one if it will help provide context). If you're interested in this specific question, you can [upvote](/help/privileges/vote-up) it, leave a [comment](/help/privileges/comment), or start a [bounty](/help/privileges/set-bounties) once you have enough [reputation](/help/whats-reputation)."},{Id:9,DisplayName:"Library",ReportType:"AnswerNotAnAnswer",GetComment:()=>"Please don't just post some tool or library as an answer. At least demonstrate [how it solves the problem](https://meta.stackoverflow.com/a/251605) in the answer itself."},{Id:10,DisplayName:"Comment",ReportType:"AnswerNotAnAnswer",GetComment:t=>t.Reputation<50?"This does not provide an answer to the question. Once you have sufficient [reputation](/help/whats-reputation) you will be able to [comment on any post](/help/privileges/comment); instead, [provide answers that don't require clarification from the asker](https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead).":"This does not provide an answer to the question. Please write a comment instead."},{Id:14,DisplayName:"Duplicate",ReportType:"AnswerNotAnAnswer",GetComment:()=>"Instead of posting an answer which merely links to another answer, please instead [flag the question](/help/privileges/flag-posts) as a duplicate."},{Id:17,DisplayName:"Non English",ReportType:"AnswerNotAnAnswer",GetComment:()=>"Welcome to Stack Overflow. Please write your answer in English, as Stack Overflow is an [English only site](https://meta.stackoverflow.com/a/297680)."},{Id:18,DisplayName:"Should be an edit",ReportType:"AnswerNotAnAnswer",GetComment:()=>"Please use the edit link on your question to add additional information. The Post Answer button should be used only for complete answers to the question."}]},{IsDangerous:!1,AppliesTo:["Answer","Question"],FlagTypes:[{Id:11,DisplayName:"Looks Fine",ReportType:"NoFlag"},{Id:12,DisplayName:"Needs Editing",ReportType:"NoFlag"},{Id:13,DisplayName:"Vandalism",ReportType:"NoFlag"}]}]}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){var r,i;r=[n,e,n(51)],void 0===(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{static GetExpiryDate(){const t=new Date;return t.setDate(t.getDate()+1),t}constructor(t="https://chat.stackoverflow.com"){this.chatRoomUrl=""+t}async GetChannelFKey(t){const e="StackExchange.ChatApi.FKey_"+t,i=new Promise((e,n)=>{this.GetChannelPage(t).then(t=>{const r=$(t).filter("#fkey");if(r.length>0){const t=r.val();e(t)}else n("Could not find fkey")})}),o=r.GetExpiryDate();return n.GreaseMonkeyCache.GetAndCache(e,()=>i,o)}async GetChatUserId(t){const e="StackExchange.ChatApi.UserId_"+t,i=new Promise((e,n)=>{this.GetChannelPage(t).then(t=>{const r=$("#active-user",$(t)).attr("class").match(/user-(\d+)/);r&&r.length&&e(parseInt(r[1],10)),n("Could not find user id")})}),o=r.GetExpiryDate();return n.GreaseMonkeyCache.GetAndCache(e,()=>i,o)}SendMessage(t,e,r){return new Promise((i,o)=>{const s=()=>(r?Promise.resolve(r):this.GetChannelFKey(t)).then(n=>{GM_xmlhttpRequest({method:"POST",url:`${this.chatRoomUrl}/chats/${t}/messages/new`,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"text="+encodeURIComponent(e)+"&fkey="+n,onload:t=>{200!==t.status?u(t.statusText):i()},onerror:t=>{u(t)}})});let a=0;const u=e=>{if(a++,a<3){const e="StackExchange.ChatApi.FKey_"+t;n.GreaseMonkeyCache.Unset(e),s()}else o(e)};s()})}GetChannelPage(t){return new Promise((e,n)=>{GM_xmlhttpRequest({method:"GET",url:`${this.chatRoomUrl}/rooms/${t}`,onload:t=>{200!==t.status?n(t.statusText):e(t.responseText)},onerror:t=>n(t)})})}}e.ChatApi=r}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(53),n(52),n(51)],void 0===(i=function(t,e,n,r,i){"use strict";function o(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.MetaSmokeDisabledConfig="MetaSmoke.Disabled",e.MetaSmokeUserKeyConfig="MetaSmoke.UserKey",e.MetaSmokeWasReportedConfig="MetaSmoke.WasReported";class s{static async Reset(){i.GreaseMonkeyCache.Unset(e.MetaSmokeDisabledConfig),i.GreaseMonkeyCache.Unset(e.MetaSmokeUserKeyConfig)}static async IsDisabled(){const t=i.GreaseMonkeyCache.GetFromCache(e.MetaSmokeDisabledConfig);return void 0!==t&&t}static async Setup(t,n){n||(n=async t=>{if(await s.IsDisabled())return;if(!confirm("Setting up MetaSmoke... If you do not wish to connect, press cancel. This will not show again if you press cancel. To reset configuration, see footer of Stack Overflow."))return void i.GreaseMonkeyCache.StoreInCache(e.MetaSmokeDisabledConfig,!0);window.open(t,"_blank"),await o(100);return await new Promise(t=>{const e=()=>{$(window).off("focus",e);const n=window.prompt("Once you've authenticated Advanced Flagging with metasmoke, you'll be given a code; enter it here.");if(n)return t(n);t()};$(window).focus(e)})}),s.codeGetter=n,s.appKey=t,s.getUserKey()}static QueryMetaSmoke(t,e){this.pendingTimeout&&clearTimeout(this.pendingTimeout),this.pendingPosts.push({postId:t,postType:e}),this.pendingTimeout=setTimeout(s.QueryMetaSmokeInternal,1e3)}static QueryMetaSmokeInternal(){const t={},e=[];for(const n of s.pendingPosts){const r=s.GetQueryUrl(n.postId,n.postType);t[r]={postId:n.postId,postType:n.postType},e.push(r)}s.pendingPosts=[];const n=e.join(),r=new Date;r.setDate(r.getDate()+30),s.IsDisabled().then(e=>{e||$.ajax({type:"GET",url:"https://metasmoke.erwaysoftware.com/api/v2.0/posts/urls",data:{urls:n,key:""+s.appKey}}).done(e=>{for(const n of e.items){const e=t[n.link];if(e){const r=s.GetObservableKey(e.postId,e.postType),i=s.ObservableLookup[r];i&&i.next(n.id),delete t[n.link]}}for(const e in t)if(t.hasOwnProperty(e)){const n=t[e],r=s.GetObservableKey(n.postId,n.postType),i=s.ObservableLookup[r];i&&i.next(null)}}).fail(e=>{for(const n in t)if(t.hasOwnProperty(n)){const r=t[n],i=s.GetObservableKey(r.postId,r.postType),o=s.ObservableLookup[i];o&&o.error(e)}})})}static GetQueryUrl(t,e){return"Answer"===e?`//${window.location.hostname}/a/${t}`:`//${window.location.hostname}/questions/${t}`}static async GetSmokeyId(t,e){const n=this.GetObservableKey(t,e),i=s.ObservableLookup[n];return i?i.pipe(r.take(1)).toPromise():null}static GetObservableKey(t,e){return JSON.stringify({postId:t,postType:e})}static getUserKey(){return i.GreaseMonkeyCache.GetAndCache(e.MetaSmokeUserKeyConfig,()=>new Promise(async(t,e)=>{let n=s.actualPromise;void 0===n&&(n=s.codeGetter("https://metasmoke.erwaysoftware.com/oauth/request?key="+s.appKey),s.actualPromise=n);const r=await n;r&&$.ajax({url:"https://metasmoke.erwaysoftware.com/oauth/token?key="+s.appKey+"&code="+r,method:"GET"}).done(e=>t(e.token)).fail(t=>e(t))}))}Watch(t,e){const r=s.GetObservableKey(t,e);if(!s.ObservableLookup[r]){const t=new n.ReplaySubject(1);s.ObservableLookup[r]=t}return s.QueryMetaSmoke(t,e),s.ObservableLookup[r]}async ReportNaa(t,e){const n=await s.GetSmokeyId(t,e);return null!=n&&(await this.SendFeedback(n,"naa-"),!0)}async ReportRedFlag(t,e){const n=await s.GetSmokeyId(t,e);if(null!=n)return await this.SendFeedback(n,"tpu-"),!0;{const n="Answer"===e?`//${window.location.hostname}/a/${t}`:`//${window.location.hostname}/q/${t}`,r=new Promise(async(t,e)=>{const r=await s.getUserKey();r&&$.ajax({type:"POST",url:"https://metasmoke.erwaysoftware.com/api/w/post/report",data:{post_link:n,key:s.appKey,token:r}}).done(()=>t(!0)).fail(()=>e())}),i=await r;s.GetQueryUrl(t,e);return await o(1e3),s.QueryMetaSmoke(t,e),i}}async ReportLooksFine(t,e){const n=await s.GetSmokeyId(t,e);return null!=n&&(await this.SendFeedback(n,"fp-"),!0)}async ReportNeedsEditing(t,e){const n=await s.GetSmokeyId(t,e);return null!=n&&(await this.SendFeedback(n,"fp-"),!0)}async ReportVandalism(t,e){const n=await s.GetSmokeyId(t,e);return null!=n&&(await this.SendFeedback(n,"tp-"),!0)}SendFeedback(t,e){return new Promise((n,r)=>{s.getUserKey().then(i=>{$.ajax({type:"POST",url:`https://metasmoke.erwaysoftware.com/api/w/post/${t}/feedback`,data:{type:e,key:s.appKey,token:i}}).done(()=>n()).fail(()=>r())})})}}s.ObservableLookup={},s.pendingPosts=[],s.pendingTimeout=null,e.MetaSmokeAPI=s}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(53),n(52),n(72),n(75)],void 0===(i=function(t,e,n,r,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.NattyAPI=class{constructor(t){this.chat=new o.ChatApi,this.subject=new n.Subject,this.replaySubject=new n.ReplaySubject,this.answerId=t}Watch(){if(this.subject.subscribe(this.replaySubject),i.IsStackOverflow()){const t=new Date;t.setDate(t.getDate()+1),new Promise((t,e)=>{let n=0;const r=t=>{n++,n<3?i():e("Failed to retrieve natty report: "+t)},i=()=>{GM_xmlhttpRequest({method:"GET",url:"http://logs.sobotics.org/napi/api/feedback/"+this.answerId,onload:e=>{if(200===e.status){const n=JSON.parse(e.responseText);n.items&&n.items[0]?t(!0):t(!1)}else r(e.responseText)},onerror:t=>{r(t)}})};i()}).then(t=>this.subject.next(t)).catch(t=>this.subject.error(t))}return this.subject}async ReportNaa(t,e){if(t<e)throw new Error("Answer must be posted after the question");if(!i.IsStackOverflow())return!1;if(await this.WasReported())return await this.chat.SendMessage(111347,`@Natty feedback https://stackoverflow.com/a/${this.answerId} tp`),!0;{const n=this.DaysBetween(t,new Date),r=this.DaysBetween(e,t);if(isNaN(n))throw new Error("Invalid answerDate provided");if(isNaN(r))throw new Error("Invalid questionDate provided");if(n>30||r<30)return!1;const i=this.chat.SendMessage(111347,"@Natty report https://stackoverflow.com/a/"+this.answerId);return await i.then(()=>{const t=new Date;t.setDate(t.getDate()+30),this.subject.next(!0)}),!0}}async ReportRedFlag(){return!!i.IsStackOverflow()&&(!!await this.WasReported()&&(await this.chat.SendMessage(111347,`@Natty feedback https://stackoverflow.com/a/${this.answerId} tp`),!0))}async ReportLooksFine(){return!!i.IsStackOverflow()&&(!!await this.WasReported()&&(await this.chat.SendMessage(111347,`@Natty feedback https://stackoverflow.com/a/${this.answerId} fp`),!0))}async ReportNeedsEditing(){return!!i.IsStackOverflow()&&(!!await this.WasReported()&&(await this.chat.SendMessage(111347,`@Natty feedback https://stackoverflow.com/a/${this.answerId} ne`),!0))}async WasReported(){return this.replaySubject.pipe(r.take(1)).toPromise()}DaysBetween(t,e){return(e-t)/864e5}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(72)],void 0===(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GenericBotAPI=class{constructor(t){this.answerId=t}async ReportNaa(){return await this.makeTrackRequest()}async ReportRedFlag(){return await this.makeTrackRequest()}async ReportLooksFine(){return!1}async ReportNeedsEditing(){return!1}computeContentHash(t){if(!t)return 0;let e=0;for(let n=0;n<t.length;++n)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}makeTrackRequest(){return new Promise((t,e)=>{n.IsStackOverflow()||t(!1),0===$("#answer-"+this.answerId+" .js-post-body").length&&t(!1),0===$(".top-bar .my-profile .gravatar-wrapper-24").length&&e("Flag Tracker: Could not find username.");const r=$(".top-bar .my-profile .gravatar-wrapper-24").attr("title"),i=this.computeContentHash($("#answer-"+this.answerId+" .js-post-body").html().trim());GM_xmlhttpRequest({method:"POST",url:"https://so.floern.com/api/trackpost.php",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"key=Cm45BSrt51FR3ju&postId="+this.answerId+"&contentHash="+i+"&flagger="+encodeURIComponent(r),onload:n=>{200!==n.status&&e("Flag Tracker Error: Status "+n.status),t(!0)},onerror:t=>{e("Flag Tracker Error: "+t.responseText)}})})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(53),n(52),n(75)],void 0===(i=function(t,e,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CopyPastorAPI=class{constructor(t,e){this.answerId=t,this.key=e,this.subject=new n.Subject,this.replaySubject=new n.ReplaySubject(1),this.subject.subscribe(this.replaySubject)}Watch(){const t=new Date;return t.setDate(t.getDate()+30),new Promise((t,e)=>{const n=`https://copypastor.sobotics.org/posts/findTarget?url=//${window.location.hostname}/a/${this.answerId}`;GM_xmlhttpRequest({method:"GET",url:n,onload:n=>{const r=JSON.parse(n.responseText);"success"===r.status?t(r.posts):e(r.message)},onerror:t=>{e(t)}})}).then(t=>this.subject.next(t)).catch(t=>this.subject.error(t)),this.subject}Promise(){return this.replaySubject.pipe(r.take(1)).toPromise()}async ReportTruePositive(){return this.SendFeedback("tp")}async ReportFalsePositive(){return this.SendFeedback("fp")}async SendFeedback(t){const e=$(".top-bar .my-profile .gravatar-wrapper-24").attr("title"),n=new i.ChatApi,r=await n.GetChatUserId(111347),o=(await this.Promise()).map(n=>({post_id:n.post_id,feedback_type:t,username:e,link:"https://chat.stackoverflow.com/users/"+r,key:this.key})).map(t=>new Promise((e,n)=>{JSON.stringify(t);GM_xmlhttpRequest({method:"POST",url:"https://copypastor.sobotics.org/feedback/create",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"post_id="+t.post_id+"&feedback_type="+t.feedback_type+"&username="+t.username+"&link="+t.link+"&key="+t.key,onload:t=>{200!==t.status?n(JSON.parse(t.responseText)):e(!0)},onerror:t=>{n(t)}})})),s=await Promise.all(o);if(s.length<=0)return!1;for(let t=0;t<s.length;t++)if(!s[t])return!1;return!0}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(53),n(52)],void 0===(i=function(t,e,n,r){"use strict";function i(){const t=new n.Subject;return function(t){if(s.push(t),o)return;const e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.addEventListener("load",()=>{s.forEach(t=>t(this))},!1),e.apply(this,arguments)},o=!0}(e=>{t.next(e)}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.WatchFlags=function(){return i().pipe(r.filter(t=>!!/flags\/posts\/\d+\/add\/[a-zA-Z]+/.exec(t.responseURL)))},e.WatchRequests=i;let o=!1;const s=[]}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(73),n(76),n(74),n(51)],void 0===(i=function(t,e,n,r,i,o){"use strict";function s(){const t=[];return i.flagCategories.forEach(e=>{e.FlagTypes.forEach(e=>{t.push({Id:e.Id,DisplayName:e.DisplayName})})}),t}async function a(){return Promise.all([l("Open dropdown on hover",n.ConfigurationOpenOnHover),l("Watch for manual flags",n.ConfigurationWatchFlags),l("Watch for queue responses",n.ConfigurationWatchQueues),l("Disable AdvancedFlagging link",n.ConfigurationLinkDisabled),l("Uncheck 'Comment' by default",n.ConfigurationDefaultNoComment),l("Uncheck 'flag' by default",n.ConfigurationDefaultNoFlag)])}async function u(){const t=[],e=o.GreaseMonkeyCache.GetFromCache(n.ConfigurationEnabledFlags)||[];s().forEach(n=>{const r=(i="flag-type-"+n.Id,o=n.DisplayName,$('<div class="grid gs8 gsx w25">  <div class="grid--cell"><input class="s-checkbox" type="checkbox" id="'+i+'"></div>  <label class="grid--cell s-label fw-normal" for="'+i+'">'+o+"</label></div>"));var i,o;const s=e.indexOf(n.Id)>-1,a=r.find("input");s&&a.prop("checked",!0),t.push({configHTML:r,checkBox:a,Id:n.Id})});const r=t.map(t=>({element:t.configHTML}));return r.push({onSave:async()=>{const e=t.filter(t=>!!t.checkBox.prop("checked")).map(t=>t.Id);o.GreaseMonkeyCache.StoreInCache(n.ConfigurationEnabledFlags,e)},requiresReload:!0}),r}async function c(){return[{element:$("<a>").text("Clear expired items from cache").click(()=>o.GreaseMonkeyCache.ClearExpiredKeys()).wrap('<div class="grid--cell">').parent(),requiresReload:!0},{element:$("<a>").text("Clear Metasmoke Configuration").click(async()=>{await r.MetaSmokeAPI.Reset()}).wrap('<div class="grid--cell">').parent(),requiresReload:!0},{element:$("<a>").text("Get MetaSmoke key").attr("href","https://metasmoke.erwaysoftware.com/oauth/request?key="+n.metaSmokeKey).wrap('<div class="grid--cell">').parent()},{element:$("<a>").text("Manually register MetaSmoke key").click(async()=>{const t=window.prompt("Enter metasmoke key");t&&(o.GreaseMonkeyCache.StoreInCache(r.MetaSmokeDisabledConfig,!1),localStorage.setItem("MetaSmoke.ManualKey",t))}).wrap('<div class="grid--cell">').parent(),requiresReload:!0},{element:$("<a>").text("Clear chat FKey").click(async()=>{o.GreaseMonkeyCache.Unset("StackExchange.ChatApi.FKey_111347")}).wrap('<div class="grid--cell">').parent(),requiresReload:!0}]}async function l(t,e){const n=t.toLowerCase().replace(/\s/g,"_"),r=$('<div>  <div class="grid gs8 gsx">    <div class="grid--cell"><input class="s-checkbox" type="checkbox" id="'+n+'"/></div>    <label class="grid--cell s-label fw-normal" for="'+n+'">'+t+"</label>  </div></div>"),i=r.find("input");return o.GreaseMonkeyCache.GetFromCache(e)&&i.prop("checked",!0),{element:r,onSave:async()=>{const t=!!i.prop("checked");o.GreaseMonkeyCache.StoreInCache(e,t)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.SetupConfiguration=async function(){const t=$(".site-footer--copyright").children(".-list"),e=$("<div>").css("line-height","18px").css("text-align","left").css("padding","5px");await async function(){if(!o.GreaseMonkeyCache.GetFromCache(n.ConfigurationEnabledFlags)){const t=s().map(t=>t.Id);o.GreaseMonkeyCache.StoreInCache(n.ConfigurationEnabledFlags,t)}}(),await async function(){const t=$('<aside class="s-modal" id="af-config" role="dialog" aria-labelledby="af-modal-title"       aria-describedby="af-modal-description" aria-hidden="true"    data-controller="s-modal" data-target="s-modal.modal">    <div class="s-modal--dialog s-modal__full w60" role="document">        <h1 class="s-modal--header fw-body c-movey" id="af-modal-title">AdvancedFlagging configuration</h1>        <div class="s-modal--body fs-body2" id="af-modal-description"></div>        <div class="grid gs8 gsx s-modal--footer">            <button class="grid--cell s-btn s-btn__primary" type="button">Save changes</button>            <button class="grid--cell s-btn" type="button" data-action="s-modal#hide">Cancel</button>        </div>        <button class="s-modal--close s-btn s-btn__muted" href="#" aria-label="Close" data-action="s-modal#hide">            <svg aria-hidden="true" class="svg-icon iconClearSm" width="14" height="14" viewBox="0 0 14 14"><path d="M12 3.41L10.59 2 7 5.59 3.41 2 2 3.41 5.59 7 2 10.59 3.41 12 7 8.41 10.59 12 12 10.59 8.41 7 12 3.41z"></path></svg>        </button>    </div></aside>'),e=[],r=[{SectionName:"General",Items:await a()},{SectionName:"Flags",Items:await u()},{SectionName:"Admin",Items:await c()}];let i=!0;r.forEach(n=>{i||t.find("#af-modal-description").append("<hr>"),i=!1;const r=$("<fieldset>").attr("class","grid gs8 gsy fd-column af-section-"+n.SectionName.toLowerCase()).html(`<h2 class="grid--cell">${n.SectionName}</h2>`);t.find("#af-modal-description").append(r),n.Items.forEach(t=>{e.push(t),t.element&&r.append(t.element)})});t.find(".s-btn__primary").click(t=>{t.preventDefault();let r=!1;e.forEach(t=>{t.onSave&&t.onSave(),r=!!t.requiresReload}),n.displaySuccess("Configuration saved"),r&&setTimeout(()=>{window.location.reload()},500)}),$("body").append(t),$('label[for="flag-type-12"]').parent().removeClass("w25").css("width","18.3%");const o=$(".af-section-flags").children("div");for(let t=0;t<o.length;t+=5)o.slice(t,t+5).wrapAll('<div class="grid--cell"><div class="grid gs16"></div></div>')}();const r=$('<a id="af-modal-button">AdvancedFlagging configuration</a>');$(document).on("click","#af-modal-button",()=>Stacks.showModal(document.querySelector("#af-config"))),e.append(r),e.insertAfter(t)}}.apply(e,r))||(t.exports=i)}]);